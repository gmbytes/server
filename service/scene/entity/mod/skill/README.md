# Skill：Effect 与 Buff 设计参考（魔兽常见机制枚举）

本目录用于整理“魔兽类”技能系统里两类核心概念：

- **Effect（技能效果）**：一次性或瞬时的结算逻辑（命中时立刻发生，或按脚本在某个时刻触发）。
- **Buff / Debuff（状态）**：附着在单位身上的持续性状态，在持续时间内改变属性、周期触发、提供光环、限制行为等。

术语说明：

- **Buff** 通常指增益状态；**Debuff** 指减益状态。
- 在实现层面 Buff/Debuff 常常共用同一套“状态（Aura/Status）”系统，只是阵营/效果不同。

---

## Effect 与 Buff 的区别（核心）

### 1) 生命周期

- **Effect**
  - 以“事件”为中心：施法成功、弹道命中、造成伤害、治疗结算、打断成功等。
  - 多数为瞬时：执行完逻辑就结束。
  - 即便有延迟（弹道飞行、蓄力结束、延时爆炸），本质仍是“到点结算一次”。

- **Buff/Debuff**
  - 以“附着对象 + 持续时间”为中心：挂在单位身上存在一段时间。
  - 具备持续性：
    - 持续修改属性（加攻强、加护甲、减速等）
    - 周期触发（每秒掉血/回血/回蓝）
    - 监听事件触发（受击触发护盾、暴击触发加速）
  - 必须处理：持续时间、刷新、叠加、驱散、免疫、死亡/切场清除等。

### 2) 表现与可交互性

- **Effect** 多数不需要在状态栏可见（例如一次伤害、一次击退）。
- **Buff/Debuff** 通常可见且可交互（驱散、偷取、免疫、层数、优先级）。

### 3) 叠加与刷新

- **Effect** 一般不会“叠层”，更多是多次执行。
- **Buff/Debuff** 需要明确叠加规则（见下文）。

### 4) 工程建模经验法则

- 当机制需要：持续时间、周期 Tick、可驱散/可偷取、免疫分类、层数与刷新策略、状态栏展示
  - 更适合建模为 **Buff/Debuff**。

- 当机制是：命中立即伤害/治疗、立即位移一次、立即打断
  - 更适合拆为 **Effect（即时结算） +（可选）Buff/Debuff（持续部分）**。

---

## 魔兽常见技能 Effect 枚举（按机制分类）

说明：这里枚举的是“效果类型集合”，用于覆盖大多数魔兽类技能脚本需求；不是职业技能清单。

### A. 伤害类（Damage Effects）

- **直接伤害**：物理/法术/真实；可暴击与否；是否受护甲/抗性影响。
- **溅射/分裂伤害**：主目标全额，附近目标衰减。
- **范围伤害**：圆形、扇形、矩形、环形。
- **多段伤害**：同一次施法多次结算（连击、跳弹）。
- **斩杀/阈值增伤**：目标血量低于阈值时增伤。
- **按属性/资源缩放**：按攻强/法强/最大生命/当前生命/缺失生命等。
- **反伤/反弹**：把部分伤害反弹（触发条件常由 Buff 提供）。

### B. 治疗与恢复（Healing/Restore Effects）

- **直接治疗**
- **群体治疗**
- **吸血/汲取**：伤害转治疗、通道汲取。
- **资源恢复**：回蓝/回能量/回怒等。

### C. 控制与限制（CC & Control）

- **打断**：打断施法/通道。
- **施加控制状态**：眩晕、沉默、定身、恐惧、变形、缴械、致盲等（持续部分通常是 Debuff）。
- **击退/击飞/拉拽**：通常是一次位移 Effect，可附带短暂控制 Debuff。

### D. 位移（Movement Effects）

- **瞬移/闪现**
- **冲锋/突进**
- **跳跃/后跳**
- **交换位置/传送到目标**
- **推/拉**：一次位移结算。

### E. 状态操控（Aura Manipulation Effects）

- **施加 Buff/Debuff**
- **刷新持续时间**
- **叠层/消耗层数**
- **驱散（Dispel/Purge）**：友方驱散负面；敌方净化增益。
- **偷取（Steal）**：将敌方增益转移给自己。
- **免疫判定**：判定是否免疫某类 Debuff。

### F. 防御（Defense Effects）

- **护盾（吸收量）**：常用 Buff 维护剩余吸收值。
- **减伤/免疫/无敌**：大多以 Buff 表达，Effect 负责施加。

### G. 召唤与控制权（Summon/Control Effects）

- **召唤物/临时单位**：宠物、守卫、图腾、临时单位。
- **控制权改变**：心控、魅惑（多为持续 Debuff/状态）。

### H. 仇恨与战斗规则（Threat & Combat Rule Effects）

- **嘲讽**：瞬时改变仇恨 + 施加持续强制目标状态。
- **仇恨修改**：增加/降低仇恨。
- **标记**：施加一个可被其他技能读取的 Debuff。
- **链接/分摊**：常由 Buff 监听伤害事件实现。

### I. 区域/地面效果（Area Effects）

- **地面持续伤害/治疗**：可实现为“区域实体 + 周期 Effect”，或“区域光环 Buff”。
- **陷阱**：布置实体，触发时执行 Effect 并附加 Debuff。

---

## 魔兽常见 Buff/Debuff 枚举（按机制分类）

### 1) 属性增益/减益（Stat Modifiers）

- 主属性/副属性：力量/敏捷/智力；攻强/法强；护甲/抗性。
- 速度类：攻速、施法速度、移动速度。
- 概率类：暴击、急速、命中、躲闪、格挡等。
- 伤害加成/易伤：自己造成伤害提高；目标受到伤害提高。

### 2) 持续伤害/持续治疗（DoT/HoT）

- 流血（Bleed）
- 毒（Poison）
- 疾病（Disease）
- 诅咒（Curse）
- 魔法（Magic）
- 灼烧/腐蚀/暗影等 DoT
- 持续治疗 HoT

### 3) 控制类 Debuff（Crowd Control Debuffs）

- 眩晕（Stun）
- 沉默（Silence）
- 定身（Root）
- 减速（Slow）
- 恐惧（Fear）/魅惑（Charm）/催眠（Sleep）
- 变形（Polymorph）/冰冻（Freeze）/放逐（Banish）
- 缴械（Disarm）
- 致盲/迷惑（Blind/Incapa）
- 法术系别锁（School Lock）

### 4) 防御与生存（Defense & Survival Buffs）

- 护盾（Absorb Shield）：记录剩余吸收量。
- 减伤（Damage Reduction）：全减伤/来源减伤（仅物理、仅法术、仅某一学校）。
- 免疫（Immunity）：免疫控制、免疫魔法、免疫物理等。
- 无敌/不可选中（Invulnerable/Untargetable）。
- 防猝死（Cheat Death）。

### 5) 触发型 Buff（Proc / Triggered Auras）

- 受击触发：护盾、反伤、加速。
- 攻击触发：追加伤害、追加 DoT、触发回能。
- 暴击触发/击杀触发。
- 施法触发：下一次施法强化、减耗、瞬发。
- 冷却缩减/重置：通过监听事件实现。

### 6) 光环（Auras）

- 自带光环：持续给周围单位加 Buff 或 Debuff。
- 图腾/领域光环：由单位或区域实体提供。
- 团队光环。

### 7) 姿态/形态（Stance/Form）

- 姿态类 Buff：影响可用技能/资源机制；通常互斥（同一时间只允许一种）。

### 8) 标记/印记/追踪（Marks/Tags）

- 易伤标记。
- 可被引爆的标记（叠层后引爆/消耗）。

### 9) 链接与共享（Links）

- 伤害分摊/链接（Damage Share/Link）。
- 治疗转移（Heal Transfer）。
- 生命链接（Life Link）。

---

## Buff/Debuff 的关键规则（建议显式配置）

### 1) 叠加（Stacking）

常见叠加策略：

- 不可叠加：同名存在时失败或刷新。
- 刷新时间：层数不变，仅刷新持续时间。
- 叠层增加：层数增加，持续时间刷新或不刷新。
- 独立计时：同名可多实例并存（各自计时/各自伤害）。
- 取更强/取更长：新 Buff 更强或更长则替换。

### 2) 驱散（Dispel）与分类（Dispellable Types）

魔兽常见维度：

- Magic（魔法）
- Curse（诅咒）
- Poison（中毒）
- Disease（疾病）

可选补充：

- Enrage（激怒）

### 3) 免疫（Immunity）

建议支持：

- 免疫某类控制（免疫眩晕/定身等）。
- 免疫某类伤害学校（免疫火焰/暗影等）。
- 不可驱散/不可偷取。

### 4) 快照与动态（Snapshot vs Dynamic）

- Snapshot：DoT/HoT 在施加时记录施法者属性，后续不变。
- Dynamic：DoT/HoT 每跳按当前属性计算。

---

## 常见拆分示例（Effect + Buff）

### 火球术

- Effect：命中时造成一次火焰伤害。
- Debuff：施加灼烧 DoT（每秒掉血 6 秒）。

### 冲锋

- Effect：位移到目标并造成一次伤害。
- Debuff：眩晕 1 秒。

### 护盾术

- Buff：吸收 N 点伤害（状态内维护 remainingAbsorb）。

---

## 文档用途

- 用于配置表/脚本层的效果类型枚举参考。
- 用于实现层将“瞬时结算（Effect）”与“持续状态（Buff/Debuff）”职责拆分。
